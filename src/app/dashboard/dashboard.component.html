<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <a class="navbar-brand" href="#">Dashboard</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" (click)="onCompanyView()">Company </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" (click)="onEmployeeView()">Employee </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" (click)="logout()">Logout</a>
      </li>
      <li>

          <input type="=text" class="form-control" name="partname" placeholder="Search by id, name, phone..." [(ngModel)]="formDataSearch.SearchString">
          <!-- <p class="text-danger">{{errorMsgSearch.SearchString}}</p> -->
      </li>
      <li>
        &nbsp; <button class="btn btn-secondary"  (click)="onSearch()">Search</button>
      </li>
    </ul>
  </div>
</nav>


<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <!-- <a class="" routerLink="">Login</a> | <a class="" routerLink="/api/home" >Home</a> -->
      <button *ngIf="inTab=='company'" class="btn btn-primary pull-right m-5" (click)="openModalAdd(add)">Add Company</button>
      <button *ngIf="inTab=='employee'" class="btn btn-primary pull-right m-5"
        (click)="openModalAdd(employeeadd)">Add Employee</button>

      <table class="table table-hover table-bordered">
        <thead>
          <tr>
            <th>#ID</th>
            <th>Company Name</th>
            <th *ngIf="inTab=='company'">Type</th>
            <th *ngIf="inTab=='employee'">Employee ID</th>
            <th *ngIf="inTab=='employee'">Phone</th>
            <th *ngIf="inTab=='employee'">Manager</th>
            <th>Address</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data1 of datas">

            <td>{{data1._id}}</td>
            <td>{{data1.name}}</td>
            <td *ngIf="inTab=='company'">{{data1.type}}</td>
            <td *ngIf="inTab=='employee'">{{data1.eid}}</td>
            <td *ngIf="inTab=='employee'">{{data1.phone}}</td>
            <td *ngIf="inTab=='employee'">{{data1.manager}}</td>
            <td>{{data1.address}}</td>
            <td>
              <button *ngIf="inTab=='employee'" class="btn btn-warning" (click)="openModalEdit(employeeedit,data1)">Edit</button>
              <button *ngIf="inTab=='company'" class="btn btn-warning" (click)="openModalEdit(edit,data1)">Edit</button>&nbsp;
              <button class="btn btn-danger" (click)="onDelete(data1)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>

<ng-template #add>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Add Data</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <label for="name">Name</label>
      <input type="=text" class="form-control" name="name" [(ngModel)]="formData.name">
      <p class="text-danger">{{errorMsg.name}}</p>

      <label for="type">Type</label>
      <input type="=text" class="form-control" name="type" [(ngModel)]="formData.type">
      <p class="text-danger">{{errorMsg.type}}</p>

      <label for="address">Address</label>
      <input type="=text" class="form-control" name="address" [(ngModel)]="formData.address">
      <p class="text-danger">{{errorMsg.address}}</p>

      <button class="btn btn-primary" (click)="onSave()">Save</button>

    </form>
  </div>
</ng-template>


<ng-template #edit>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Upload Data</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <label for="name">Name</label>
      <input type="=text" class="form-control" name="name" [(ngModel)]="formData.name">
      <p class="text-danger">{{errorMsg.name}}</p>

      <label for="type">Type</label>
      <input type="=text" class="form-control" name="type" [(ngModel)]="formData.type">
      <p class="text-danger">{{errorMsg.type}}</p>

      <label for="address">Address</label>
      <input type="=text" class="form-control" name="address" [(ngModel)]="formData.address">
      <p class="text-danger">{{errorMsg.address}}</p>

      <button class="btn btn-primary" (click)="onUpdate()">Update</button>

    </form>
  </div>
</ng-template>





<ng-template #employeeadd>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Edit Data</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <label for="eid">Employee ID</label>
      <input type="text" class="form-control" name="eid" [(ngModel)]="formData.eid">
      <p class="text-danger">{{errorMsg.eid}}</p>

      <label for="name">Name</label>
      <input type="text" class="form-control" name="name" [(ngModel)]="formData.name">
      <p class="text-danger">{{errorMsg.name}}</p>

      <label for="phone">Phone</label>
      <input type="text" class="form-control" name="phone" [(ngModel)]="formData.phone">
      <p class="text-danger">{{errorMsg.phone}}</p>

      <label for="manager">Manager</label>
      <input type="text" class="form-control" name="manager" [(ngModel)]="formData.manager">
      <p class="text-danger">{{errorMsg.manager}}</p>

      <label for="address">Address</label>
      <input type="text" class="form-control" name="address" [(ngModel)]="formData.address">
      <p class="text-danger">{{errorMsg.address}}</p>

      <label for="name">Company Name</label>
      <input type="text" class="form-control" name="cname" [(ngModel)]="formData.cname">
      <p class="text-danger">{{errorMsg.cname}}</p>

      <button class="btn btn-primary" (click)="onEmployeeSave()">Save</button>

    </form>
  </div>
</ng-template>


<ng-template #employeeedit>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Upload Data</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <label for="eid">Employee ID</label>
      <input type="text" class="form-control" name="eid" [(ngModel)]="formData.eid">
      <p class="text-danger">{{errorMsg.eid}}</p>

      <label for="name">Name</label>
      <input type="text" class="form-control" name="name" [(ngModel)]="formData.name">
      <p class="text-danger">{{errorMsg.name}}</p>

      <label for="phone">Phone</label>
      <input type="text" class="form-control" name="phone" [(ngModel)]="formData.phone">
      <p class="text-danger">{{errorMsg.phone}}</p>

      <label for="manager">Manager</label>
      <input type="text" class="form-control" name="manager" [(ngModel)]="formData.manager">
      <p class="text-danger">{{errorMsg.manager}}</p>

      <label for="address">Address</label>
      <input type="text" class="form-control" name="address" [(ngModel)]="formData.address">
      <p class="text-danger">{{errorMsg.address}}</p>

      <label for="name">Company Name</label>
      <input type="text" class="form-control" name="cname" [(ngModel)]="formData.cname">
      <p class="text-danger">{{errorMsg.cname}}</p>
      <button class="btn btn-primary" (click)="onEmployeeUpdate()">Update</button>

    </form>
  </div>
</ng-template>
